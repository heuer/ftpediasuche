

Regelungstechnik

PID-Regler â€“ eine experimentelle EinfÃ¼hrung
Dirk Fox
Regler finden wir in zahlreichen technischen GerÃ¤ten. Und sie verbreiten sich immer weiter:
Sie sind das HerzstÃ¼ck vieler (teil-)autonomer Systeme und zÃ¤hlen inzwischen zu den wichtigsten Anwendungen von Mikrocontrollern [1]. Eine zentrale Rolle spielen darunter PIDRegler [2]. Mit der Oszilloskop-Funktion von ROBO Pro lÃ¤sst sich deren Funktionsweise am
TXT-Controller wunderbar anschaulich zeigen.

Steuerung und Regelung
Die meisten Mikrocontroller-Anwendungen unserer fischertechnik-Modelle sind
Steuerungen. Dabei stellen wir einen Aktor
auf einen vorgegebenen Wert ein, beispielsweise eine LED auf eine bestimmte Helligkeit oder einen Motor auf eine feste Geschwindigkeit. FÃ¼r viele solcher Steuerungen ist der TXT Controller bei weitem
Ã¼berdimensioniert â€“ das kÃ¶nnten auch ein
paar simple ICs.
In der Praxis viel wichtiger und technisch
auch erheblich spannender sind Regler. Im
Unterschied zu einer Steuerung sorgt ein
Regler dafÃ¼r, dass eine vorgegebene â€FÃ¼hrungsgrÃ¶ÃŸeâ€œ (wie z. B. die Temperatur
eines KÃ¼hlfachs, die Helligkeit eines Raums
oder die Geschwindigkeit eines Fahrzeugs)
auch bei plÃ¶tzlichen StÃ¶rungen (wie dem
Ã–ffnen der KÃ¼hlschranktÃ¼r, abnehmendem
Tageslicht oder hÃ¼geligem GelÃ¤nde) mÃ¶glichst schnell wieder erreicht wird.

Ein Regler muss solche StÃ¶rungen erkennen
und die Steuerung des Aktors so anpassen,
dass das System die Vorgabe wieder einhÃ¤lt.
Dazu benÃ¶tigt der Regler einen â€Feedbackâ€œ-Mechanismus, der ihn informiert,
wenn es zu Abweichungen der RegelgrÃ¶ÃŸe
von der vorgegebenen FÃ¼hrungsgrÃ¶ÃŸe
kommt. Aus der gemessenen Abweichung
berechnet der Regler eine neue StellgrÃ¶ÃŸe
fÃ¼r den Aktor, um die Abweichung der
RegelgrÃ¶ÃŸe von der FÃ¼hrungsgrÃ¶ÃŸe zu verringern (Abb. 1).
Beispiel: Will man bei einer motorgetriebenen Achse die Zahl der Umdrehungen pro
Zeiteinheit auch bei variabler Last konstant
halten, muss man die Winkelgeschwindigkeit der Achse messen und bei Abweichungen von der Sollvorgabe die Motorspannung erhÃ¶hen oder senken.



Einfache Regelungsaufgaben mit einem
Aktor, der nur an- oder ausgeschaltet werden kann, lÃ¶st man mit einer so genannten
Zweipunktregelung [3]: Sinkt die RegelgrÃ¶ÃŸe unter (bzw. steigt sie Ã¼ber) einen vorgegebenen Schwellenwert, wird der Aktor
(bspw. ein KÃ¼hl- oder WÃ¤rmeaggregat) zugeschaltet, bis ein zweiter, hÃ¶herer Schwellenwert erreicht ist. Solche einfachen Regler finden sich in BackÃ¶fen, Heizungen,
KÃ¼hlschrÃ¤nken oder Klimaanlagen. Die
Reglerkurve entspricht einem unregelmÃ¤ÃŸigen â€Rechtecksignalâ€œ. Der Bereich, in dem
die RegelgrÃ¶ÃŸe zwischen den Schwellenwerten â€pendeltâ€œ, nennt man Hysterese.
(â€Nachwirkungâ€œ). Soll die Regelung in
beide â€Richtungenâ€œ erfolgen, um beispielsweise einen festen Abstand einzuhalten [4,
5], verwendet man meist eine Dreipunktregelung (â€zu nahâ€œ, â€zu fernâ€œ, â€Abstand okâ€œ).
Komplizierter wird es, wenn ein Regler die
RegelgrÃ¶ÃŸe nach einer StÃ¶rung so schnell
wie mÃ¶glich wieder auf die vorgegebene
FÃ¼hrungsgrÃ¶ÃŸe einstellen soll. Voraussetzung dafÃ¼r ist ein mÃ¶glichst stetig steuerbarer Aktor (bspw. ein Motor), Ã¼ber den das
System geregelt werden kann.

Regelungstechnik

und Genauigkeit der Messung der RegelgrÃ¶ÃŸe oder die VerzÃ¶gerung, mit der eine
Ã„nderung der StellgrÃ¶ÃŸe sich auf die RegelgrÃ¶ÃŸe auswirkt.
SchlieÃŸlich hat der gewÃ¤hlte Reglertyp
maÃŸgeblichen Einfluss auf die Wirkung.
Besonders leistungsfÃ¤hig und flexibel (und
daher sehr verbreitet) sind P-, PI-, PD- und
PID-Regler [2]. Die Funktionsweise und
Wirkung dieser Regler werden wir nun am
Beispiel eines â€analogen Spurfolgersâ€œ veranschaulichen.

Regelungsaufgabe
In [6] habe ich vorgestellt, wie man einen
â€digitalenâ€œ Spurfolger mit dem fischertechnik-Spursensor sehr elegant als Endlichen
Automaten in ROBO Pro programmieren
kann.
Der SchÃ¶nheitsfehler dieser LÃ¶sung: Der
Spurfolger folgt einem Zick-Zack-Kurs. Es
ist offensichtlich, dass das Ergebnis nicht
optimal ist, denn der vom Spurfolger
zurÃ¼ckgelegte Weg ist deutlich lÃ¤nger als
die Spur; auÃŸerdem muss der Spurfolger bei
jedem Richtungswechsel verlangsamen.

Bei einer solchen Regelung kÃ¶nnen verschiedene unerwÃ¼nschte Effekte auftreten:
ï‚· Der Regler stellt die FÃ¼hrungsgrÃ¶ÃŸe zu
langsam wieder ein;
ï‚· Der Regler schwingt Ã¼ber, d. h. aus einer
zu kleinen wird eine zu groÃŸe RegelgrÃ¶ÃŸe;
ï‚· Der Regler fÃ¤ngt an zu oszillieren und
schaukelt sich schlimmstenfalls sogar
auf, anstatt in die gewÃ¼nschte Ruhelage
zurÃ¼ckzukehren.
Um einen Regler fÃ¼r das gewÃ¼nschte Regelungsziel zu optimieren, mÃ¼ssen zunÃ¤chst
einige Randbedingungen festgelegt oder
bestimmt und verschiedene Annahmen getroffen werden. Dazu zÃ¤hlen insbesondere
die maximale GrÃ¶ÃŸe einer StÃ¶rung, auf die
der Regler reagieren soll, die AuflÃ¶sung

Controller und Kamera

Man kann die Spurfolger-Aufgabe aber
auch als ein Regelungsproblem betrachten
und mit Hilfe eines Reglers lÃ¶sen. Dazu
ersetzen wir an unserem kleinen â€Buggyâ€œ
zunÃ¤chst einmal den Spursensor durch eine
Kamera (Abb. 2).



Eine fischertechnik-Designer-Datei des
Modells findet ihr im Downloadbereich der
ft:pedia. Die Konstruktion beschrÃ¤nkt sich
auf das Wesentliche; aber natÃ¼rlich darf der
kleine Buggy um StoÃŸstangen, Beleuchtung
etc. erweitert werden (Abb. 3) â€“ oder auch
ganz anders aussehen.

Spurbreite mÃ¼ssen ggf. an den verwendeten
Parcours angepasst werden.
Die Kamera hat eine horizontale AuflÃ¶sung
von 320 Punkten; daher sollten die Koordinaten auf -160 bis +160 festgelegt werden,
um eine mÃ¶glichst hohe Genauigkeit der
Messungen zu erreichen. Bei der Bildrate
(frames per second, fps) habe ich mit 25 fps
und hoher Genauigkeit gute Ergebnisse erzielt (Abb. 5). Damit wird zugleich die
maximal mÃ¶gliche Zahl der Richtungskorrekturen pro Sekunde (alle 40 ms) festgelegt. Diese Wahl beeinflusst die Wirkung
des Reglers erheblich.
Um die Abweichung von der Spur zu korrigieren, muss der Buggy nach links oder
rechts gesteuert werden. Das erreichen wir,
indem wir die Geschwindigkeit des einen
Motors erhÃ¶hen und die des anderen verringern.


Der Regler muss nun dafÃ¼r sorgen, dass der
Mittelpunkt der von der Kamera erkannten
Spur in der Mitte des Bildausschnitts der
Kamera liegt (FÃ¼hrungsgrÃ¶ÃŸe w). Die
Linienerkennung von ROBO Pro liefert uns
den Abstand vom Mittelpunkt (Abweichung
e, Abb. 4) als â€analogenâ€œ Wert, aus dem der
Regler die erforderliche Korrektur u der
Motorspannung berechnet.
Die Konfiguration der Linienerkennung ist
einfach (Abb. 5): Sie sollte die gesamte
Breite des Kamerabilds im oberen Drittel
umfassen; die minimale und die maximale

DafÃ¼r mÃ¼ssen wir zunÃ¤chst eine â€Basisgeschwindigkeitâ€œ fÃ¼r die beiden Motoren definieren. Mit der Basisgeschwindigkeit legen
wir zugleich den maximalen â€Lenkeinschlagâ€œ des Buggy fest, nÃ¤mlich die Differenz zur Maximalgeschwindigkeit (512).
Hier haben wir einen weiteren Optimierungsparameter unseres Reglers: Je hÃ¶her
die Basisgeschwindigkeit, desto schneller
der Buggy â€“ aber desto schwÃ¤cher die
Wirkung der Steuerung.
Wir beginnen mit einer Basisgeschwindigkeit von 400; spÃ¤ter kÃ¶nnen wir sie bei
Bedarf noch anpassen. Damit der Buggy
geradeaus fÃ¤hrt, mÃ¼ssen die Geschwindigkeiten der beiden Motoren in der Regel
etwas unterschiedlich gewÃ¤hlt werden.




Regelungstechnik


Mit dem simplen ROBO Pro-Programm in
einer schwarzen Spur testen und die Basisgeschwindigkeit des schnelleren Motors anpassen (senken). Wenn ihr das Programm
im Onlinemodus startet, wird in ROBO Pro
die Abweichung von der Spur angezeigt.

â€šSpurfolger Kamera.rppâ€˜ (Geradeausfahrt)

Dreipunkt-Regler
FÃ¼r eine simple Dreipunktregelung kÃ¶nnen
wir nun eine maximale Abweichung von
der Spur nach links bzw. rechts als Schwellenwerte festlegen. Ãœberschreitet der Buggy
den einen, muss er nach rechts steuern,
Ã¼berschreitet er den anderen, nach links.

â€šSpurfolger Dreipunkt-Regler.rppâ€˜



Pro-Programm. Das Ergebnis ist ein Fahrtverlauf mit mehr oder weniger demselben
Zick-Zack-Kurs, dem unser Buggy auch mit
einem IR-Spursensor folgen wÃ¼rde. Abb. 8
zeigt den Verlauf des Spurabstands. Man
erkennt, dass der Regler stark Ã¼berschwingt: Es kommt zu Abweichungen von
mehr als 100.

ï‚· Die maximale Motorgeschwindigkeit ist
512. Daher sollte der Korrekturwert bei
der von uns gewÃ¤hlten Motor-Basisgeschwindigkeit (400) den Wert 110 nicht
Ã¼berschreiten.
ï‚· Die Abweichung von der Spur kann bis
zu Â±130 betragen. Die Korrektur sollte
aber mÃ¶glichst schon bei kleinen Abweichungen (< 40) erfolgen.
Der ProportionalitÃ¤tsfaktor sollte also zwischen 0 und 2 liegen. Wir kÃ¶nnen uns an
einen geeigneten Wert herantasten, indem
wir mit 0,1 beginnen und den Wert schrittweise um 0,1 erhÃ¶hen, bis der Regler zu oszillieren beginnt, ohne sich aufzuschaukeln.


Immerhin kÃ¶nnen wir hier nicht nur die
StÃ¤rke des Lenkeinschlags, sondern auch
die Schwellenwerte, bei denen der Regler
reagieren soll, sehr fein anpassen. Damit
lassen sich die Amplitude und die Frequenz
der â€Schwingungâ€œ in Abb. 8 Ã¤ndern und das
Ãœberschwingen etwas dÃ¤mpfen. Viel besser
wird die Regelung dadurch aber nicht.

P-Regler
Kann man die GrÃ¶ÃŸe der Abweichung der
RegelgrÃ¶ÃŸe von der FÃ¼hrungsgrÃ¶ÃŸe messen,
so verwendet man Ã¼blicherweise einen Proportionalregler, der die Ã„nderung der StellgrÃ¶ÃŸe abhÃ¤ngig von (oder proportional zu)
der GrÃ¶ÃŸe der Abweichung vornimmt. Ein
solcher Regler wird auch kurz P-Regler genannt. Die GÃ¼te des Reglers hÃ¤ngt dabei
(auch) von der AuflÃ¶sung und Genauigkeit
dieser Messung ab. Von einem Zwei- und
Dreipunktregler unterscheidet er sich durch
seinen stetigen Verlauf.
Um den Korrekturwert u fÃ¼r die StellgrÃ¶ÃŸe
zu erhalten, multiplizieren wir die Abweichung mit einem ProportionalitÃ¤tsfaktor
ğ¾ğ‘ . Zur Bestimmung dieses Faktors stellen
wir ein paar Ãœberlegungen an:


Die Abweichung von der Spur ğ‘’ und die
berechnete StellgrÃ¶ÃŸe ğ‘¢ (Korrekturwert der
Motorgeschwindigkeiten) mit
ğ‘¢ = ğ¾ğ‘ âˆ™ ğ‘’
kÃ¶nnt ihr euch im Online-Mode in ROBO
Pro mit der Oszilloskop-Funktion anzeigen
lassen. Das ROBO Pro-Programm fÃ¼r den
P-Regler zeigt Abb. 10.
Um den P-Regler zu testen, starten wir den
Buggy parallel zur Spur, und zwar so, dass
die Linienerkennung die Spur gerade noch
rechts (oder links) im Bild findet. Abb. 9
zeigt die Abweichung von der Spur Ã¼ber die
ersten 10 Sekunden der Testfahrt mit einem
P-Regler mit ProportionalitÃ¤tsfaktor 0,4.

(Abweichung e [Skala: 1s/25])

Man erkennt, dass der Regler zunÃ¤chst kurz
Ã¼berschwingt und sich dann um einen Wert
von etwa -35 einpendelt.


Regelungstechnik


ErhÃ¶hen wir den ProportionalitÃ¤tsfaktor, so
reagiert der Regler schneller, schwingt
dabei aber deutlich Ã¼ber. Bei einem Wert
von 0,9 beginnt der Regler zu oszillieren
(Abb. 11) und der Buggy folgt wieder
einem Zick-Zack-Kurs.

beginnt bei zu groÃŸem ğ¾ğ‘ irgendwann zu
oszillieren. AuÃŸerdem schwingt er sich auf
einen festen Abstand zur Spur ein. Diese
Nachteile versuchen wir nun zu mildern.

UngefÃ¤hr hier liegt also die obere Grenze
fÃ¼r den ProportionalitÃ¤tsfaktor. Die StellgrÃ¶ÃŸe u liegt dabei immer noch im Bereich
von Â±100; wir mÃ¼ssen die Basisgeschwindigkeit der Motoren also nicht senken, um
den Regelungsbereich zu vergrÃ¶ÃŸern.

Das Ãœberschwingen des P-Reglers kÃ¶nnen
wir dÃ¤mpfen, indem wir den Regler beim
ZurÃ¼ckschwingen â€abbremsenâ€œ: Wenn die
GrÃ¶ÃŸe der Abweichung zunimmt, soll die
Richtungskorrektur des Buggy verstÃ¤rkt,
wenn sie abnimmt, soll die Korrektur reduziert werden.

D-Glied

Dazu ergÃ¤nzen wir die Berechnung der
StellgrÃ¶ÃŸe um einen Korrekturwert, der sich
aus der VerÃ¤nderung der Abweichung berechnet, also der ersten Ableitung des Verlaufs der RegelgrÃ¶ÃŸe. Dieser Korrekturwert
wird daher auch Differentialglied (oder DGlied) genannt.
zu oszillieren [Skala: 1s/25]

Zusammengefasst: Der P-Regler korrigiert
bei groÃŸen Abweichungen stÃ¤rker als bei
kleinen und passt sich so an eine StÃ¶rung an.
Allerdings schwingt er leicht Ã¼ber und

Dabei muss die VerÃ¤nderung immer Ã¼ber
dieselbe Zeiteinheit gemessen werden. In
unserem Programm erzwingen wir das mit
einem Warte-Element von 20 ms in der
Schleife (Abb. 12). Noch besser wÃ¤re, die
Zeit zwischen zwei aufeinander folgenden
Linienerkennungen zu messen.



Auch hier benÃ¶tigen wir einen Faktor (ğ¾ğ‘‘ ),
mit dem wir die VerÃ¤nderung der Abweichung multiplizieren, bevor wir sie zur
StellgrÃ¶ÃŸe addieren.
ğ‘¢ = ğ¾ğ‘ âˆ™ ğ‘’ + ğ¾ğ‘‘ âˆ™ (ğ‘’ âˆ’ ğ‘’ğ‘™ğ‘ğ‘ ğ‘¡ )

Mit etwas Aufwand kann man den PDRegler nun noch feiner justieren, bis das
Ãœberschwingen kaum noch zu erkennen ist.
Die stabile Dauerabweichung von der Mitte
der Spur liegt jedoch immer noch bei etwa
20 â€“ diesen Nachteil des P-Reglers
schwÃ¤cht das D-Glied zwar ab, gleicht ihn
jedoch nicht vollstÃ¤ndig aus.

I-Glied
Die stabile â€Dauerabweichungâ€œ des Buggys
von der exakten Mitte der Spur kÃ¶nnen wir
mit einem weiteren Regelglied korrigieren,
das die Abweichungen summiert und in die
Berechnung der StellgrÃ¶ÃŸe einflieÃŸen lÃ¤sst.
Dieses â€integrierendeâ€œ Reglerglied wird
auch als I-Regler (oder I-Glied) bezeichnet.

â€šSpurfolger PD-Regler.rppâ€˜

Es gibt verschiedene AnsÃ¤tze, um einen
geeigneten Wert fÃ¼r ğ¾ğ‘‘ zu finden. Eine
bewÃ¤hrte praktische Methode ist, zunÃ¤chst
einen mÃ¶glichst groÃŸen ProportionalitÃ¤tsfaktor zu wÃ¤hlen, bei dem der P-Regler
gerade noch nicht oszilliert (hier z. B. ğ¾ğ‘ =
0,8). Dann startet man mit einem kleinen
Wert fÃ¼r ğ¾ğ‘‘ (z. B. ğ¾ğ‘‘ = 1) und erhÃ¶ht ğ¾ğ‘‘ so
lange schrittweise, bis der Regler sich
schnell der FÃ¼hrungsgrÃ¶ÃŸe nÃ¤hert, ohne
Ã¼berzuschwingen. Bei unserem Buggy erreichen wir das z. B. mit ğ¾ğ‘‘ = 6 (Abb. 13).

Damit der I-Anteil des Reglers sich nicht
auf einen beliebig groÃŸen Wert aufaddiert,
mÃ¼ssen wir den Wert â€kappenâ€œ oder auf
andere Art das Wachstum begrenzen, z. B.
indem wir vor dem Aufaddieren der aktuellen Abweichung den Wert verkleinern
(bspw. halbieren) oder beim Erreichen der
FÃ¼hrungsgrÃ¶ÃŸe den Wert auf Null zurÃ¼cksetzen.

ğ¾ğ‘‘ = 6,0 [Skala: 1s/25]



Regelungstechnik

In unserem Unterprogramm Constrain
(Abb. 14) wird der Wert der Fehlersumme
ğ‘ ğ‘¢ğ‘šğ‘’ auf Â±500 begrenzt. Die Grenze kann
nahezu beliebig gewÃ¤hlt werden â€“ der Integralfaktor ğ¾ğ‘– , mit dem wir den aufsummierten Fehler ğ‘ ğ‘¢ğ‘šğ‘’ bei der StellgrÃ¶ÃŸenberechnung multiplizieren, bestimmt den Einfluss
auf die StellgrÃ¶ÃŸe.
ğ‘¢ = ğ¾ğ‘ âˆ™ ğ‘’ + ğ¾ğ‘‘ âˆ™ (ğ‘’ âˆ’ ğ‘’ğ‘™ğ‘ğ‘ ğ‘¡ ) + ğ¾ğ‘– âˆ™ ğ‘ ğ‘¢ğ‘šğ‘’
ğ¾ğ‘– mÃ¼ssen wir (abhÃ¤ngig vom Maximalwert
der Fehlersumme) relativ klein wÃ¤hlen: Er
soll ja wirken, wenn Proportional- und
Differentialanteil klein sind und der Buggy
mehr oder weniger geradeaus fÃ¤hrt.

â€šSpurfolger PID-Regler.rppâ€˜

Pro-Programm. Die Faktoren ğ¾ğ‘ und ğ¾ğ‘‘
Ã¼bernehmen wir von unserem PD-Regler.
Den Faktor ğ¾ğ‘– mÃ¼ssen wir so lange vergrÃ¶ÃŸern, bis der Buggy sich auf der Spur
einschwingt. Da das Integralglied das Ãœberschwingen verstÃ¤rkt, mÃ¼ssen wir zum Ausgleich ğ¾ğ‘‘ leicht vergrÃ¶ÃŸern.
In Abb. 16 sehen wir das Ergebnis eines
Testlaufs mit ğ¾ğ‘– = 0,035 , in dem die AnnÃ¤herung an die Mitte der Spur recht gut
gelingt. Das ist ein Reglerverlauf, wie wir
ihn uns wÃ¼nschen: Eine schnelle Reaktion
in ca. 100 ms, minimales Ãœberschwingen
und kein dauerhafter Abstand zur Spur.

ğ¾ğ‘‘ = 6,5 und ğ¾ğ‘– = 0,035 [Skala: 1s/25]

Offline-Mode
Die ROBO-Pro-Programme zeigen (im Online-Mode) bei jeder Linienerkennung den
gemessenen Abstandswert im Oszilloskop
an â€“ 25 Mal pro Sekunde. Wenn wir die
Daten stattdessen innerhalb der MessSchleife ausgeben lassen, dann wird der
Verlauf â€eckigerâ€œ: Es werden nur noch etwa
10-12 Messwerte je Sekunde angezeigt.
Unser Programm schafft also statt 25 nur
10-12 SchleifendurchlÃ¤ufe pro Sekunde. Da
der Aufwand der Rechenoperationen im PC
nicht ins Gewicht fÃ¤llt, muss es die Ãœbermittlung der Daten sein, die die Regelstrecke verlÃ¤ngert. Das kÃ¶nnen wir Ã¤ndern,
indem wir die Oszilloskopanzeige durch
eine Ausgabe des Abstandswerts auf dem
TXT-Display ersetzen und das Programm
im Download-Mode starten.
Allerdings sind nun unsere Regelungsparameter nicht mehr optimal: Durch die hÃ¤ufigeren Messungen reagiert der P-Regler
Ã¶fter, und die Korrektur durch das D-Glied
fÃ¤llt geringer aus, da die AbstandsÃ¤nderungen bei kÃ¼rzeren Messintervallen natÃ¼rlich
betragsmÃ¤ÃŸig kleiner sind. Der Effekt wird
noch verstÃ¤rkt, wenn wir die Bildrate der
Kamera auf den Maximalwert von 60 fps
erhÃ¶hen.
Das Nachjustieren des Reglers gelingt aber
auch ohne Oszilloskop. So kÃ¶nnen wir den
Proportionalfaktor ğ¾ğ‘ in der DownloadVariante des P-Reglers (Programm â€šSpurfolger P-Regler (download).rppâ€˜) auch mit
bloÃŸem Auge einstellen: Wir passen dessen




Wert (wie oben) so lange an, bis der PRegler gerade noch nicht oszilliert.
Den Faktor ğ¾ğ‘‘ kÃ¶nnen wir Ã¼bernehmen,
mÃ¼ssen ihn aber durch den Quotienten der
beiden Messfrequenzen (fps) teilen: 60/25 =
2,4. Durch Ã„nderungen in kleinen Schritten
kÃ¶nnen wir das Ergebnis erforderlichenfalls
anpassen, bis das Ãœberschwingen des Reglers kaum noch zu erkennen ist (Programm
â€šSpurfolger PD-Regler (download).rppâ€˜).
Unseren Faktor ğ¾ğ‘– sollten wir Ã¼berhaupt
nicht anpassen mÃ¼ssen. Wenn es zu mehr
Messungen kommt, â€ziehtâ€œ das I-Glied den
Buggy schneller an die Linie â€“ das hat
hÃ¶chstens Auswirkungen auf das D-Glied
(Programm â€šSpurfolger PID-Regler (download).rppâ€˜).

Optimierungen
Gleich mehrere Parameter bestimmen die
Wirkung des PID-Reglers und beeinflussen
sich auch gegenseitig. Mit diesen Parametern kÃ¶nnt ihr insbesondere die DownloadVersion des Reglers experimentell weiter
optimieren. Beachtet aber, dass ihr sie nur
in kleinen Schritten Ã¤ndert, da es sonst passieren kann, dass ihr den Regler komplett
unbrauchbar macht.
Diese Parameter sind:
ï‚· Die Basisgeschwindigkeit: Sie begrenzt
den Regelungsbereich zu Gunsten der
Geschwindigkeit des Buggy.
ï‚· Der Winkel der Kamera und die Position
der Linienerkennung im Bild: Je weiter
entfernt vom Buggy die Spur erkannt
wird, desto frÃ¼her reagiert die Richtungskorrektur. Dadurch â€schneidetâ€œ der
Buggy allerdings engere Kurven (Abb.
17). Umgekehrt kann die Spur bei kurzer
Voraussicht in einer scharfen Kurve das
Bild verlassen, bevor der Buggy seine
Fahrtrichtung ausreichend korrigiert hat.



ï‚· Die Bildrate (fps), das Zeitglied des
Reglers, bestimmt die LÃ¤nge der Regelungsstrecke: Je kÃ¼rzer, desto hÃ¤ufiger
erfolgt eine Fahrtrichtungskorrektur, und
desto geringer die gemessene Ã„nderung
der Abweichung.
ï‚· Die Faktoren ğ¾ğ‘ , ğ¾ğ‘‘ und ğ¾ğ‘– des PIDReglers (mit der oben jeweils beschriebenen Wirkung).
ï‚· Die Art der Begrenzung der Fehlersumme, damit dessen Wert nicht ins Unkontrollierte wÃ¤chst.
Den grÃ¶ÃŸten Effekt erzielt ihr mit einer ErhÃ¶hung der Basisgeschwindigkeit und der
anschlieÃŸenden Anpassung aller drei Faktoren. Dabei kÃ¶nnt ihr wie im vorangegangenen Abschnitt vorgehen â€“ ğ¾ğ‘– sollte konstant bleiben, ğ¾ğ‘ bis kurz vor dem Oszillieren vergrÃ¶ÃŸert werden und ğ¾ğ‘‘ nur eine
geringe Anpassung benÃ¶tigen.

Kreisparcours
Der Regler funktioniert natÃ¼rlich nicht nur
auf einer Geraden â€“ schlieÃŸlich soll er die
Fahrt des Buggy ja gerade an kurvige (also
â€gestÃ¶rteâ€œ) SpurverlÃ¤ufe anpassen. Wir
kÃ¶nnen ihn daher z. B. mit dem ROBO
Explorer Parcours (128962) oder dem
ROBO TX Training Lab Parcours 1 (RÃ¼ckseite, 137652) oder Parcours 2 (Vorderseite,
137676) testen. In der fischertechnikDatenbank gibt es alle drei Parcoursâ€˜ im
A1-Format zum Ausdrucken.
Im Download-Bereich der ft:pedia habe ich
euch einen Parcours in A0 (ca. 1020 x 720
mm) ohne FarbflÃ¤chen bereitgestellt â€“
darauf lÃ¤sst sich der Spurfolger hervorragend testen (Abb. 18).


Regelungstechnik

auf die Regelung eine neue Kalibrierung
des PID-Reglers (also die Bestimmung der
Faktoren ğ¾ğ‘ , ğ¾ğ‘‘ und ğ¾ğ‘– ) erforderlich
machen kann.


Damit die Regelung bei sehr engen Kurven
noch â€mitkommtâ€œ und die Kamera die Spur
nicht verliert, mÃ¼sst ihr ggf. die Basis-Geschwindigkeit ein wenig senken. Eine
geringfÃ¼gig Ã¼berhÃ¶hte Geschwindigkeit
gleicht der Buggy aus: Verliert er die Spur,
sorgt die Warteschleife im Programm dafÃ¼r,
dass die Einstellung der Motoren erhalten
bleibt. So findet der Buggy die Spur normalerweise auch bei sehr scharfen Kurven
kurz darauf wieder.
Wer es probieren mÃ¶chte: Mit meiner (leidlich optimierten) Download-Version des
PID-Reglers mit einer Basisgeschwindigkeit von 485 benÃ¶tigt mein Buggy knapp 10
Sekunden fÃ¼r eine Runde auf dem Parcours
in Abb. 18. Wer schafft das schneller?

Fazit
Der 1922 von Nicolas Minorsky (19851970), dem Erfinder des Gyrometers, fÃ¼r
die US-Navy entwickelte PID-Regler ist
heute Standard bei anspruchsvollen Regelungsaufgaben. Mit diesem Ã¤uÃŸerst mÃ¤chtigen Werkzeug lassen sich â€“ ganz ohne KI
oder andere â€Kanonenâ€œ â€“ beeindruckend
autonome Systeme entwickeln.
Seine volle LeistungsfÃ¤higkeit erreicht der
PID-Regler, wenn er, wie beschrieben,
Schritt fÃ¼r Schritt an das System angepasst
wird. Abb. 19 zeigt den Verlauf der ReglerVarianten bei optimaler Wahl der Parameter im Vergleich.
Dabei ist zu beachten, dass jede Ã„nderung
von Komponenten des Systems mit Einfluss

Vergleich (Bild: rn-wissen.de)

Das Experimentierbeispiel â€analoger Spurfolgerâ€œ zeigt, dass das kein Hexenwerk ist,
sondern â€“ sofern man dabei systematisch
vorgeht â€“ mit begrenztem Aufwand gemeistert werden kann. Es ist auch faszinierend,
die Wirkung des Reglers, die mit bloÃŸem
Auge kaum erkennbar ist, in der Oszilloskopanzeige von ROBO Pro zu verfolgen.
FÃ¼r komplexere Systeme als unseren Buggy
gibt es auÃŸerdem heuristische Faustformelverfahren zur Bestimmung der Parameter
eines PID-Reglers [7, 8].
Beachten muss man allerdings, dass die
wichtigste Grenze eines jeden (PID-) Reglers das Zeitglied ist: Da die Wirkung der
Regelung fast immer erst etwas verzÃ¶gert
eintritt, kann der Regler nur StÃ¶rungen bis
zu einer bestimmten GrÃ¶ÃŸe ausgleichen.
Wird bei unserem Buggy beispielsweise die
Kurve zu eng, verliert die Kamera die Spur,
bevor die Richtungskorrektur abgeschlossen ist. Diese Grenze sollte man zuvor
abschÃ¤tzen, um zu wissen, ob der Regler ein
vorliegendes Regelungsproblem Ã¼berhaupt
lÃ¶sen kann.
Mit dem fischertechnik TXT Controller und
ROBO Pro kann man die Wirkung eines
PID-Reglers Ã¼ber die Oszilloskop-Funktion
auch hervorragend veranschaulichen â€“ z. B.
im Informatik- oder Technik-Unterricht
durch eine Projektion des Grafen via
Beamer oder Wand-Display.



Alle in diesem Beitrag verwendeten ROBO
Pro-Programme findet ihr als Download zu
dieser Ausgabe der ft:pedia.

[4]

Stefan Falk: Dreipunktregelung.
ft:pedia 2/2019, S. 32â€“38.

[5]

Artur Fischer: Dreipunktregelung.
Hobby 4 Band 5 (39545), FischerWerke, 1975, S. 10-13.

Referenzen
[1]

Honeywell: Grundlagen der Reglerparametrierung. EinfÃ¼hrung, 2007.

[6]

[2]

Tim Wescott: PID without a PhD.
2018.

Dirk Fox: Endliche Automaten in
Robo Pro. ft:pedia 3/2014, S. 42â€“50.

[7]

[3]

Artur Fischer: Zweipunktregelung.
Hobby 4 Band 2 (39052), FischerWerke, 1971, S. 48-51.

Wikipedia: Faustformelverfahren
(Automatisierungstechnik).

[8]

Jim Sluka: A PID Controller For
Lego Mindstorms Robots. 20092018.




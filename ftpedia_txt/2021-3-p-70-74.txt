

Computing

Revival: Relais und Gabellichtschranke an TXT
und ftDuino
Matthias Dettmer
Mal Hand aufâ€™s Herz: Wer hat zuletzt etwas mit einem oder mehreren Silberlingen, etwa dem
h4RB (36392), dem alten Relaisbaustein RBII (37683) oder gar einer Gabellichtschranke
(32357) aus dem ersten Robotics-Baukasten gebaut? FÃ¼r mein Projekt â€Solarfarmâ€œ brauchte
ich mindestens sechs, besser acht Relais, um zwischen Solarzellen, Verbrauchern und Speichern â€herumschaltenâ€œ zu kÃ¶nnen. Tief unten in meinem Fundus fand ich acht h4RB â€“ also los.

Relais am Controller
Mit der heutigen Technik, also einem TX
oder TXT, kÃ¶nnen die Relaisbausteine nicht
direkt verwendet werden. Sie werden nÃ¤mlich in â€negativer Logikâ€œ angesteuert: 0
Volt am Eingang â€Eâ€œ sorgt dafÃ¼r, dass das
Relais anzieht. SchlieÃŸt man den Relaiseingang direkt an einen Ausgang O1 bis O8 des
TXT an, dann zieht das Relais wÃ¤hrend der
Initialisierung des TXT sofort an.
Ein Programm im TXT mÃ¼sste jetzt den
Ausgang auf â€Highâ€œ (â€Einâ€œ) setzen, damit
das Relais wieder abfÃ¤llt. Ein erneutes Anziehen mÃ¼sste invers angesteuert werden.

So etwas ist im Programm hakelig, und der
Zustand beim Anlaufen ist nicht gesteuert.
Nun hat fischertechnik inzwischen interessante Elemente im Portfolio, die mir bei den
Relais weitergeholfen haben. Alles was ich
brauche, um einen Inverter zu bauen, der
aus Plus eben Minus macht, sind eine LED
fÃ¼r 9 Volt (162134, oder mit Linse 162135)
und einen Transistor, bestehend aus dem
GehÃ¤use (152059) und entweder der Platine
(152218) und einem NPN-Transistor BC
547C (152860) oder dem â€allerneuestenâ€œ,
bereits aufgelÃ¶teten BC847C (185516) aus
dem Profi E-Tronic-Baukasten (Abb. 1).



Auf dem Schaltbild in Abb. 1 ist nicht die
LED zu sehen, sondern an ihrer Stelle ein
2k2 Widerstand. Das war der erste, gleich
erfolgreiche Versuch. Zu beachten ist, dass
der Relaisbaustein Ã¼ber seine Buchsen mit
9 Volt versorgt werden muss. Hier kommt
nicht der Gleichrichterbaustein zum Einsatz, sondern ich hole mir die Betriebsspannung direkt beim TXT ab. Weitere
Relaisbausteine werden Ã¼ber die roten
SteckbrÃ¼cken mit Spannung versorgt â€“ das
Prinzip war damals schon genial, und das ist
es meiner Meinung nach immer noch.
Steuere ich den Ausgang (zwischen 1 und
8) mit â€1â€œ an, dann flieÃŸen so um die 3 mA
durch den Widerstand und die Basis. Der
Transistor Ã¶ffnet, das Relais zieht an. Nun
kÃ¶nnte man meinen, weil das ja an O1 mit
â€1â€œ pulsweitenmoduliert ist, mÃ¼sste das
Relais anfangen wie verrÃ¼ckt zu rasseln.
Zur Beruhigung: nein, das tut es nicht. Die
Grundfrequenz des pulsweitenmodulierten
Ausganges ist so um die 208 Hertz, mithin
etwas weniger als 5 ms. Das Relais hat aber
Abfallzeiten von bis zu 12 ms, und deswegen hÃ¶rt man nicht einmal etwas.
NatÃ¼rlich kann der Ausgang gerne auch mit
â€8â€œ, also zu 100% durchgeschaltet werden.
Streng genommen ist das ein wenig sozialvertrÃ¤glicher fÃ¼r die Elektronik, es flieÃŸen
ca. 10 mA. Vielleicht ebenfalls interessant:
Ein angezogenes Relais zieht etwa 33 mA
(bei O1 = 1) bis 30 mA (bei O1 = 8) Strom
aus der â€Versorgungâ€œ.

und Ansteuerung

Computing

Der Widerstand ist ein handelsÃ¼blicher
Metallschichtwiderstand, der anstelle eines
Birnchens in einer Klemm-Lampenfassung
eingebracht wurde: Birnchen raus, Widerstand rein, festgeklemmt, fertig. Das Prinzip
ist â€fischertechnik-kompatibelâ€œ; im Profi
Electronics-Baukasten gibt es genauso aufgebaute WiderstÃ¤nde, nur mit anderen
Werten. Auch die sind neuerdings als fest
verlÃ¶tete Elemente zu haben.
Nun wollte ich eigentlich sehen, ob das
Relais â€angezogenâ€œ oder im Ruhezustand
ist. Die oben erwÃ¤hnte LED erspart mir das
Gefummel mit dem Widerstand und spendiert mir im gleichen Zug die gewÃ¼nschte
Funktion. Ich muss nicht einmal ein fischertechnik-Originalteil verÃ¤ndern â€“ perfekt!

Gabellichtschranke an TXT
und ftDuino
Ein weiteres Element in meinem Projekt
(Ã¼ber das ich hoffentlich bald auch einen
Artikel schreiben kann ğŸ˜‰) ist eine Drehzahlmessung an einem Solarmotor. Der
einfachste Ansatz ist ein Finger, der einmal
pro Umdrehung eine Lichtschranke durchbricht. Zu schwer darf das Gebilde nicht
werden; so stark ist der kleine Solarmotor ja
nicht.
Mitte der 1980er Jahr hatte fischertechnik
nicht nur Interfaces fÃ¼r die wichtigsten damals gÃ¤ngigen Personal Computer (Atari,
Apple, Schneider-CPC, IBM-PC) sondern
auch einen Robotics-Baukasten herausgebracht. Mit diesem Baukasten konnte ein
schon recht komplexer mehrachsiger Greifarm aufgebaut werden. Drehwinkel und
damit indirekt Wege konnten Ã¼ber drei
SÃ¤tze aus WalzenrÃ¤dern (32367) und
Gabellichtschranken (32357) gemessen,
genauer: â€abgezÃ¤hltâ€œ werden.
Die Interfaces haben damals maximal 5
Volt an ihren EingÃ¤ngen â€verkraftetâ€œ, die
Ansteuerung der Motoren geschah Ã¼ber
auch heute noch Ã¼bliche H-BrÃ¼cken, die
aber ein separates Netzteil benÃ¶tigten [1].





Beim Betrieb an den 9 Volt des TXT
werden die Gabellichtschranken sehr heiÃŸ
und kÃ¶nnen zerstÃ¶rt werden. Einen kurzen
Versuch halten sie aus â€“ aber nicht nachahmen!
Unter anderem bei fischerfriendsman, aber
auch im Forum ist eine Schaltung mit einem
Vorwiderstand und einem Transistor als
Signalformer beschrieben. Scheut man die
Fummelei mit anderen als den fischertechnik-Ã¼blichen WiderstÃ¤nden nicht, dann
kann man die dort beschriebene Vorschaltung recht einfach umsetzen.

Ein erster Versuch erfolgt Ã¼ber den Interface-Test in ROBO Pro: Einen Motor an
M1 anschlieÃŸen, Drehzahl eingeben, und
auf Pulse warten. Eventuell muss am Stellpotentiometer der Gabellichtschranke nachjustiert werden â€“ das hat aber bei allen
meinen Versuchen auf Anhieb (und in der
NÃ¤he eines Anschlags, aber hey!) geklappt.
Das Innenleben eines fischertechnikSteckers diente hier als â€Angriffspunktâ€œ fÃ¼r
eine Messung mit einem Oszilloskop. Aber
wie oben gesagt: Eine Justage mit einem
gelben ft-Schraubendreher im kleinen Loch
im Deckel der Gabellichtschranke und unter
Verwendung des Interface-Tests funktioniert auch ohne Oszilloskop â€“ einmal bei
laufendem Motor hin und her drehen,
irgendwo stellen sich Pulse an C1 ein.
Um nun verschiedene â€SprÃ¼ngeâ€œ austesten
zu kÃ¶nnen, wurden das Hauptprogramm
und ein Unterprogramm fÃ¼r den TXT getrennt (Abb. 5, 6).

Walzenrad am TXT

Die â€Pulsweiten-Schrittweiteâ€œ wurde bewusst so gewÃ¤hlt, dass sie auf einem
ftDuino nachgebildet werden konnte. Der
ftDuino erlaubt meiner Meinung nach eine
viel flexiblere Anwendung des I2C-Bus,
deswegen wird mein spÃ¤teres Projekt zuerst
auf einem solchen umgesetzt werden. Also:
gleiche Beschaltung, ftDuino ersetzt TXT
(Abb. 7).


Computing


Schritte mit 16 Punkten Abstand)

Die Programmierung setzt das Ganze nur in
Text statt in ROBO-Pro-KlÃ¶tzchen um
(Sketch Listing 1).

dann links herum
Listing 1: ftDuino-Sketch (Hauptprogramm)




Der ftDuino bietet statt den 512 Schritten
fÃ¼r die Pulsweitenmodulation nur 64
Schritte, also nur ein Achtel an. Die Ã¼ber
jeweils 5 Sekunden hinweg gezÃ¤hlten Pulse
werden in einer Datei abgelegt.
Ansonsten macht das Unterprogramm des
ftDuino nichts anderes als das ROBO ProProgramm. Die vom Hauptprogramm eingestellte â€Schrittweiteâ€œ wird erst rechts-,
dann linksherum an den Motorausgang
ausgegeben. Statt in eine Datei werden die
gezÃ¤hlten Pulse Ã¼ber die serielle Schnittstelle des ftDuino ausgegeben und mit
einem Terminalprogramm als Textdatei
aufgezeichnet (Listing 2).

(Drehzahlreduktion)

Das Walzenrad hat 32 Striche auf dem
Umfang. FÃ¼r die wirklichen Umdrehungen
muss die Zahl dann durch 32 geteilt werden.
450 Pulse, geteilt durch 32 Striche, geteilt
durch 5 wegen der 5 Sekunden â€ZÃ¤hlzeitâ€œ
und multipliziert mit 60 ergibt um die 170
Umdrehungen pro Minute am Getriebeabgang. Das ist ein Wert, wie er schon an
anderer Stelle bestÃ¤tigt wurde [2].
Mein Hauptziel, nÃ¤mlich die uralten Elektronik-Bauteile h4RB und die Gabellichtschranke wiederzubeleben, ist damit erreicht. Bei ebay werden selbst fÃ¼r den
allereinfachsten Gleichrichterbaustein nicht
selten Mondpreise Ã¼ber 40 â‚¬ und mehr aufgerufen; ein MonoFlop (h4MF) ist nicht
unter 89 â‚¬ zu haben. Was machen eigentlich
die KÃ¤ufer spÃ¤ter damit? In eine Vitrine
stellen? Weiter oder wieder verkaufen?

Listing 2: Unterprogramm â€GetOneâ€œ

Hier zeigt sich ein wirklich interessanter
Umstand: wÃ¤hrend die gezÃ¤hlten Pulse
beim TXT in etwa linear abnehmen, fallen
sie beim ftDuino eher exponentiell ab. Im
Diagramm in Abb. 8 sind die absolut gezÃ¤hlten Pulse Ã¼ber der Anzahl von 5
Sekunden langen Messungen abgetragen.


Die Silberlinge gehÃ¶ren nicht ins Museum
â€“ sie verdienen immer noch, in Modelle
eingebaut, genutzt â€“ und ja, bespielt zu
werden.

Referenzen
[1]

RenÃ© Trapp: V. I. P. â€“ Ein IÂ²C-nachComputing-Interface-Umsetzer (Teil
2). ft:pedia 3/2017, S. 57â€“68.

[2]

RenÃ© Trapp: Kenndaten der ftMotoren. ft:pedia 3/2013, S. 9â€“29.


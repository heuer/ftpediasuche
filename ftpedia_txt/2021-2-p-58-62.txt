

Elektronik

Echtzeitgenerator
Hans-Christian Funke
Zu der von mir vorgestellten digitalen Uhr [1] wurde ich mehrfach angefragt, ob man nicht
statt der recht aufwendigen Justierung einen Sekunden-Taktgeber bauen und anschlieÃŸen
kÃ¶nnte. Das wÃ¤re tatsÃ¤chlich sehr praktisch und auch fÃ¼r andere Anwendung sinnvoll, z. B.
kÃ¶nnte man die echte Laufzeit eines Pakets durch die Sortierstation, die eines Autos durch die
Waschanlage oder die einer Kugel durch die Kugelbahn ermitteln.

Wer liefert den Takt?
ZunÃ¤chst musste ich Ãœberlegungen anstellen, wie so ein genauer Taktgeber aussehen
mÃ¼sste und wie garantiert wird, dass dieser
tatsÃ¤chlich zuverlÃ¤ssig einen SekundenTakt liefert.
FÃ¼r zuverlÃ¤ssige Taktgeberquellen wird in
der digitalen Elektronik in der Regel auf einen Quarz zurÃ¼ckgegriffen, der Ã¤uÃŸerst genau eine Schwingung (Takt) mit konstanter
Frequenz erzeugt. In der Praxis sieht es aber
so aus, dass die Taktfrequenzen der Quarze
im Megahertz- (MHz) oder Gigahertzbereich (GHz) gebraucht werden und somit im
Wesentlichen auch nur solche zu finden
sind. Allerdings gibt es einen Quarz im
Elektronikbereich mit 32.768 kHz, der auch
noch im Handel erhÃ¤ltlich ist â€“ damit kommen wir unserem Ziel schon viel nÃ¤her.
Diese Art von Quarzen wurde schon in der
Anfangszeit der Computertechnik (Commodore 64, Apple II, ATARI, â€¦) fÃ¼r die
Uhrenkarten oder als Zeitgeber verwendet.
FÃ¼r die weiteren Betrachtungen mÃ¼ssen wir
uns einer Formel aus der Physik bedienen,
die den Zusammenhang zwischen Frequenz
(Hz) und Periodendauer (s) beschreibt:
ğ‘ƒğ‘’ğ‘Ÿğ‘–ğ‘œğ‘‘ğ‘’ğ‘›ğ‘‘ğ‘ğ‘¢ğ‘’ğ‘Ÿ ğ‘–ğ‘› ğ‘  =

ğ¹ğ‘Ÿğ‘’ğ‘ğ‘¢ğ‘’ğ‘›ğ‘§ ğ‘–ğ‘› ğ»ğ‘§

ğ‘‡=

ğ‘“

Wollen wir also einen Quarz mit einer Frequenz von 32.768 kHz einsetzen, dann erhalten wir folgende Taktdauer:
ğ‘‡=

=
â‰ˆ 30,518 Î¼s
ğ‘“ 32768 Hz

Wir brauchen aber einen Sekundentakt fÃ¼r
unseren Echtzeitgenerator mit
= 1 Hz
1s
Die Frequenz muss somit kleiner werden,
damit die Taktdauer grÃ¶ÃŸer wird. Hier hilft
uns die digitale Technik mit ihrem binÃ¤ren
ZÃ¤hlsystem weiter. Es gibt z. B. ZÃ¤hlerbausteine, die Takte nach dem binÃ¤ren Zahlensystem zÃ¤hlen. Ein 4-bit BinÃ¤rzÃ¤hler zÃ¤hlt
dezimal von 0 â€“ 15; in Tab. 1 kann man sehen, wie es im binÃ¤ren ZÃ¤hlsystem aussieht.
ğ‘“=

Daran kann man erkennen, dass sich immer
nach zwei Takten eine Ã„nderung am Bit 2
ergibt, nach vier Takten am Bit 3 und nach
acht Takten am Bit 4. Das lÃ¤sst sich beliebig
fortsetzen, aber wir kÃ¶nnen hier schon erkennen, dass ein BinÃ¤rzÃ¤hler nichts anderes
macht, als von Ausgang zu Ausgang (Bit zu
Bit) den Takt zu verdoppeln bzw. die Frequenz zu halbieren.
Und genau dieses Prinzip machen wir uns
zu nutze. Wir setzen einen BinÃ¤rzÃ¤hler ein,



Elektronik

der unsere Frequenz mehrmals halbiert
(siehe Tab. 2).
Takt

Bit 1

Bit 2

Bit 3

Bit 4













































































Tab. 1: 4-bit BinÃ¤rzÃ¤hler

Frequenz Taktdauer
(Hz) (s)

Frequenz Taktdauer
(Hz) (s)
4 0,25
2 0,5
Tab. 2: Teilungssequenz

Teilung
(n)

Wir mÃ¼ssen die Frequenz von 32.768 kHz
also 15-mal durch 2 teilen, damit wir eine
Frequenz von 1 Hz erhalten.

Zusatzmodul 70051
Soweit die Theorie. In der Praxis ist es so,
dass auch hÃ¤ufig ein Halbsekunden-Takt
benÃ¶tigt wird. Aus diesem Grund habe ich
eine Schaltung entworfen, die einen 0,5-Sekunden-Takt liefert. Das Ergebnis ist das
Zusatzmodul 70051, das mit drei Kabeln
ausgestattet ist:

Teilung
(n)

32.768 0,000030517


16.384 0,000061035


8.192 0,000122070


4.096 0,000244140


2.048 0,000488281


1.024 0,000976562


512 0,001953125


256 0,00390625


128 0,0078125


64 0,015625


32 0,03125


16 0,0625


8 0,125




Die rote Leitung mit rotem Stecker wird mit
â€+â€œ (Vdd 3 V bis 15 V) verbunden, entsprechend die grÃ¼ne Leitung mit grÃ¼nem Stecker mit â€-â€œ und kann so an jedem Elektronikmodul Ã¼ber â€+â€œ und â€-â€œ angesteckt werden. Das Zusatzmodul ist auch gegen Verpolung empfindlich, so dass auch hier ein





Verpolungsschutz integriert ist, der bis 2 A
standhÃ¤lt. Die gelbe Leitung mit dem gelben Stecker liefert das Echtzeitsignal als
Rechteck-Takt (Abb. 2).

Schaltung
Der Schaltungsaufbau ist sehr klein, um ein
leicht handhabbares Zusatzmodul zu erhalten (Abb. 3).
Der verwendete CMOS-Baustein gibt nur
14 Teilungen her, aber damit wird gerade
die Taktdauer von 0,5 Sekunden erreicht.
Der Ausgang des Echtzeitgenerators (gelbe
Leitung) verfÃ¼gt Ã¼ber keinerlei Endstufe
und kann maximal einen Eingang ansteuern, oder man schlieÃŸt ihn zur VerstÃ¤rkung

an ein Gatter- (AND-NAND, OR-NOR oder EXOR-EXNOR) oder ein Flip-FlopModul (D-FF oder JK-FF) an. Die AusgÃ¤nge der Gatter- und FF-Elektronikmodule
(70010-14 und 70006-7) sind wesentlich
hÃ¶her belastbar und man erhÃ¤lt damit auch
eine optische Anzeige, ob das Taktsignal
anliegt bzw. funktioniert. Zur Verwendung
des 0,5-Sekunden-Taktes ist ein Gatter zu
verwenden und fÃ¼r einen 1-Sekunden-Takt
ein Flip-Flop.
Nach der Inbetriebnahme des Echtzeitgenerators kann es passieren, dass dieser noch
eine kurze Einschwingphase benÃ¶tigt.
Sollte sich dieses Verhalten stÃ¶rend auf das
Modell auswirken, mÃ¼sste diese Zeit mit einem Mono-Flop Ã¼berbrÃ¼ckt werden.


Wie erhÃ¤lt man einen
Ein-Sekunden-Taktgenerator?
Wenn ein Sekundentakt benÃ¶tigt wird,
schlieÃŸt man den Echtzeitgenerator an ein
T-Flip-Flop (T-FF) an. Die eingehende
Taktfrequenz wird durch das T-FF halbiert.
Ein T-FF lÃ¤sst sich aus einem D-Flip-Flop
(D-FF) oder ein JK-Flip-Flop (JK-FF) aufbauen. Bei einem D-FF erhÃ¤lt man durch
Stecken einer Verbindung zwischen dem
Ausgang Q und dem Steuereingang D ein TFF. Beim JK-FF mÃ¼ssen die beiden SteuereingÃ¤nge J und K auf high gelegt werden,
damit das JK-FF zum T-FF wird.
Im Diagramm in Abb. 4 ist zu erkennen,
dass die Periodendauer am Ausgang Q doppelt so lang ist wie der Takt am Eingang Clk
des D-FF.

Digitale Uhr mit Zusatzmodul
70051
Den Echtzeitgenerator habe ich gleich in die
eingangs erwÃ¤hnte Uhr eingebaut. Mit ein
paar kleinen Ã„nderungen erhÃ¤lt man eine
Echtzeit-gesteuerte digitale Uhr (Abb. 5).

Elektronik

Der Echtzeitgenerator wird hier an eines der
freien ODER-Gatter eines Moduls 70013
angeschlossen, sodass der Takt sichtbar und
das Signal verstÃ¤rkt wird. Der Taktgenerator, der vorher die Sekunden vorgegeben
hat und dafÃ¼r justiert werden musste, wird
nun in einen BinÃ¤rzÃ¤hler umkonfiguriert, in
dem der erste Jumper auf â€ext.â€œ (externer
Takt) und der zweite auf â€Dâ€œ (digitales Signal, vom Echtzeitgenerator) gesetzt wird.
Der Ausgang des ODER-Gatters wird auf
den Takt-Eingang des Taktgenerators gelegt und gibt jetzt den Takt an. Die Schaltung mit den erforderlichen Ã„nderungen ist
in Abb. 6 zu sehen.
Der Echtzeitgenerator liefert aber einen
0,5-Sekunden-Takt; damit wÃ¼rde die Uhr
doppelt so schnell laufen wie gewÃ¼nscht.
DafÃ¼r kann man entweder ein T-FF statt des
ODER-Gatters einsetzen oder man muss
alle AnschlÃ¼sse auf der Ausgangsseite des
Taktgenerators um eine Position nach oben
verschieben (Ck8 â†’ Ck7; Ck7 â†’ Ck6
usw.), wobei die Leitung von Ck1 jetzt direkt an den Ausgang des ODER-Gatter angeschlossen wird.




VerfÃ¼gbarkeit

Quellen

Das Zusatzmodul 70051 ist seit Anfang Juni
bei Franz Santjohanser im Online-Shop erhÃ¤ltlich. Das Gleiche gilt fÃ¼r das Zusatzmodul 70050 Ãœberspannungsschutz.

[1]

Hans-Christian Funke: Digitale Uhr.
ft:pedia 3/2020, S. 78â€“82.

[2]

Online-Shop von Franz Santjohanser: https://santjohanser.de/fischertechnik/einzelteile/elektronik/module/

Schlusswort
Weitere Informationen zu den Elektronikmodulen findet ihr auf Instagram, Videos
mit Modellen auf youtube, jeweils unter
dem Stichwort â€Elektronikmoduleâ€œ. Einen
GesamtÃ¼berblick Ã¼ber alle verfÃ¼gbaren
Elektronikmodule findet ihr im OnlineShop von Franz Santjohanser [2].



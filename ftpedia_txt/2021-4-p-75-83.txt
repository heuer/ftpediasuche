
Computing

Computing

Experimente mit dem Kombisensor â€“ Teil 2
Dirk Fox
Vor drei Jahren brachte fischertechnik den â€Kombisensorâ€œ (158402) auf den Markt â€“ einen
IMU-Sensor (Inertial Measurement Unit), der via IÂ²C-Protokoll an den TXT angeschlossen
werden kann. Der etwas unglÃ¼ckliche Name verrÃ¤t allerdings nicht, was der Sensor alles kann.
Im ersten Teil des Beitrags [3] habe ich den Sensor und einige EinsatzmÃ¶glichkeiten vorgestellt.
Jetzt geht es ein wenig in die Tiefe â€“ und heraus kommt ein verbesserter ROBO Pro-Treiber.

EinfÃ¼hrung
Der im Kombisensor von fischertechnik [1]
werkelnde Bosch-IMU-Sensor BMX055
[2] umfasst einen Beschleunigungs-, einen
Kompass- und einen Gyrosensor. Der
ROBO Pro-Treiber von fischertechnik reizt
allerdings die MÃ¶glichkeiten des Sensors
bei weitem nicht aus â€“ und enthÃ¤lt zudem
einige kleine und ein paar grÃ¶ÃŸere Bugs. Im
ersten Teil des Beitrags habe ich einige
davon gefixt und gezeigt, wie man den
Kompass-Sensor kalibriert.
In diesem Teil gehen wir nun ein wenig
tiefer auf die MÃ¶glichkeiten des Sensors
ein, korrigieren ein paar weitere Fehler und
ergÃ¤nzen den Treiber um neue Funktionen.

ab. Bei maximaler ODR (2000 Samples/s)
liegt es an allen drei Achsen bei ca. Â±0,01 g
(g = 9,81 m/sÂ², Abb. 1). Reduziert man die
ODR, sinkt auch das Rauschen: Wenn die
Anwendung mit 16 Messungen pro Sekunde auskommt, ist kein Rauschen mehr festzustellen (Abb. 2).

[Skala: 0,1s/0,01g]

Beschleunigungssensor
Rauschen
Das Rauschen des Beschleunigungssensors
in der ROBO Pro-Implementierung von
fischertechnik lÃ¤sst sich, wie im ersten Teil
des Beitrags gezeigt [3], unter anderem darauf zurÃ¼ckfÃ¼hren, dass die Rohwerte der
X-, Y- und Z-Achse nicht arithmetisch um
vier Bits geshiftet werden. Nur die 12
hÃ¶chstwertigen Bits der Rohdaten sind
signifikant; die niederstwertigen vier kÃ¶nnen beliebige Daten enthalten.
Das verbleibende Rauschen hÃ¤ngt vor allem
von der gewÃ¤hlten Output Data Rate (ODR)

[Skala: 0,1s/0,01g]

Obwohl sich das Rauschen im Bereich von
Â±0,01 g bewegt, wirkt sich der Unterschied
deutlich auf die Winkelberechnungen aus
(Pitch und Roll, siehe [3]).




2.000 Samples/s, Abb. 4 bei 16 Hz: Das
Rauschen sinkt auf ein 20stel â€“ von Â±1Â° auf
Â±0,05Â°.

Offset
Sensoren haben oft einen kleinen konstanten Fehler (Offset). Wenn wir den Sensor
auf einer mit einer Wasserwaage ausgerichteten Plattform montieren (Abb. 5, 6), kÃ¶nnen wir diesen Fehler messen (Abb. 7).

Ruhelage bei 2.000 Samples/s [Skala: 1s/1Â°]
X- (gelb), Y- (grÃ¼n) und Z-Richtung (blau)
[Skala: 0,1s/0,01g]1

Ruhelage bei 16 Samples/s [Skala: 1s/1Â°]

Wenn die Genauigkeit der Beschleunigungswerte wichtig ist, sollte daher eine
mÃ¶glichst niedrige Messfrequenz gewÃ¤hlt
werden.

Der Sensor bietet mehrere integrierte Verfahren zur Kompensation solcher Fehler
oder StÃ¶rungen. Mit der Fast Compensation
wird Ã¼ber 16 Messungen der mittlere Fehler
der Messwerte einer Achse zu einem Vorgabewert bestimmt. Als Vorgabe kann in
Register 0x37 fÃ¼r jede der drei Achsen einer
der Werte +1g, -1g oder 0 gewÃ¤hlt werden.
Bei allen weiteren Messungen wird der
Fehler dann automatisch abgezogen.



Ein Tipp fÃ¼r die Nutzung des Oszilloskops: Ein
Druck auf die â€altâ€œ-Taste hÃ¤lt die Anzeige an.

Die Funktion BMX055_AccFastComp, um
die ich den Treiber ergÃ¤nzt habe, fÃ¼hrt die
Kompensation nacheinander fÃ¼r jede der
drei Achsen durch. Dazu wird in Register
0x36 jeweils ein Trigger fÃ¼r die entsprechende Achse gesetzt. AnschlieÃŸend stehen
die Offset-Werte in den Registern 0x38 (XOffset), 0x39 (Y-Offset) und 0x3A (ZOffset) und kÃ¶nnen dort ausgelesen werden.
Die Bestimmung des Offset muss im Range
Â±2g in horizontaler Ruhelage erfolgen. Die
Wirkung der Korrektur veranschaulicht der
Graf in Abb. 8.

[Skala: 0,1s/0,01g]

In Ruhelage darf der Sensor nur die Erdbeschleunigung messen. Also muss die
Wurzel aus der Summe der Quadrate der
drei vom Sensor bestimmten Beschleunigungswerten genau 1 g entsprechen [3]. Im
Programm Acc-Oszilloskop.rpp wird die
Abweichung von diesem Wert in % angezeigt. Ohne Kompensation liegt der Fehler
bei bis zu Â±0,9%; nach der Kompensation
sinkt der Fehler unter Â±0,1% â€“ die Messwerte sind also noch einmal fast um den
Faktor 10 genauer.
Die Slow Compensation, ein Hochpassfilter, filtert niedrige Frequenzen aus und
â€ziehtâ€œ die Mittelwerte der Beschleunigungswerte kontinuierlich gegen Null. Sie
kann in Register 0x37 wahlweise auf ein
oder 10 Hz eingestellt und in Register 0x36
fÃ¼r jede der drei Achsen einzeln aktiviert
werden. Das kann z. B. fÃ¼r die X- und YAchse sinnvoll sein, wenn bei einer gleichfÃ¶rmigen Bewegung die relativen Beschleunigungen gemessen werden sollen. Im

Computing

Treiber Ã¼bernimmt das die Funktion
BMX055_AccSlowComp.
Die Einstellungen und berechneten Kompensationswerte bleiben bis zum Ausschalten des Sensors erhalten. Damit sie nicht
manuell zurÃ¼ckgesetzt werden mÃ¼ssen
(Offset-Reset in Register 0x36), habe ich in
der Funktion BMX055_AccInit einen Softreset (Ã¼ber Register 0x14) ergÃ¤nzt.
Pufferung
FÃ¼r die Nutzung des Sensors in einer Echtzeitanwendung ist eine weitere Korrektur
im fischertechnik-Treiber erforderlich.
Der Sensor bietet die MÃ¶glichkeit, bis zu 32
Messwerte in einem FIFO-Puffer (First In,
First Out) zwischenzuspeichern. FÃ¼r ausgewÃ¤hlte Anwendungen kann das hilfreich
sein, wenn der Zugriff auf die Daten temporÃ¤r langsamer erfolgt als die gewÃ¤hlte
Output Data Rate (ODR) des Sensors und
man keine Messwerte verlieren mÃ¶chte. Ist
das Auslesen der Messwerte jedoch generell langsamer als die Bandbreite, fÃ¼hrt die
Verwendung des FIFO-Puffers dazu, dass
man beim Auslesen veraltete Messwerte
erhÃ¤lt. Schon bei der relativ niedrigen ODR
von knapp 31 Hz lÃ¤uft der Puffer z. B. beim
Acc-Oszilloskop ruck-zuck voll: In Abb. 9
sieht man die Zahl der im Puffer gespeicherten Messwerte (rote Kurve) in weniger als
einer Sekunde auf 32 ansteigen.

Anzahl Messwerte im Puffer [Skala: 0,1s/5])

fischertechnik nutzt diesen STREAM-Modus des FIFO-Stack bei der Initialisierung
des Sensors standardmÃ¤ÃŸig, weil sich die
VerfÃ¼gbarkeit neuer Messdaten Ã¼ber den
FIFO-Status im Register 0x0E elegant abfragen lÃ¤sst. Das ist allerdings unnÃ¶tig:



Jeder Messwert wird vom Sensor immer
auch im FIFO abgelegt und seine VerfÃ¼gbarkeit Ã¼ber 0x0E signalisiert. Der DefaultModus BYPASS macht den FIFO zu einem
Stack der Tiefe 1 â€“ und schon liest man nur
noch den jÃ¼ngsten Wert aus.
LÃ¤uft der FIFO bei einer ODR von 31 Hz
im STREAM-Modus voll, liest der TXT
regelmÃ¤ÃŸig Werte des Beschleunigungssensors aus, die fast eine Sekunde frÃ¼her gemessen wurden. Das kann man mit bloÃŸem
Auge erkennen: Wenn man den Sensor bewegt, erfolgt die Anzeige im Oszilloskop
mit dem fischertechnik-Treiber sichtbar
verzÃ¶gert. FÃ¼r eine Echtzeitanwendung sind
solche veralteten Sensorwerte vollkommen
unbrauchbar.
Die verbesserte Version des ROBO ProTreibers verwendet daher den FIFO-Modus
BYPASS mit Stack-Tiefe 1. Die Wirkung
erkennt man unmittelbar an der Reaktionszeit des Acc-Oszilloskops auf Bewegungen
des Sensors. ZusÃ¤tzlich habe ich eine Funktion ergÃ¤nzt, mit der man den FIFO-Modus
wÃ¤hlen kann. Die Messwerte, die in den
FIFO eingestellt werden, kÃ¶nnen dabei auch
auf einzelne Achsen des Beschleunigungssensors beschrÃ¤nkt werden. Damit verkÃ¼rzt
man sowohl die Messung als auch den Auslesevorgang, wenn man nur einen Achsenwert auswerten mÃ¶chte. Diese Funktion
BMX055_AccSetFIFOMode zeigt Abb. 10.

BYPASS, 1: FIFO, 2: STREAM), zu berÃ¼cksichtigende Achsen (0: alle, 1: X, 2:Y, 3: Z)


Gyrosensor
Rauschen
Auch das Gyroskop rauscht stark (bis zu
0,01Â°/s), wenn die Rohdaten nicht gefiltert
werden (Abb. 11). Da alle 16 Bit der Messwerte signifikant sind, wird es nicht durch
undefinierte Bits verursacht. Auch wirkt
sich die Wahl des Messbereichs nicht auf
das Rauschen aus.

Filterung [Skala: 0,1s/0,001Â°/s])

Das Rauschen lÃ¤sst sich durch die Wahl
eines Filters in Register 0x10 bei der Initialisierung senken: Ein kaskadiertes Integrator-Differentiator-Filter (CIC) verwirft bis
zu 95% der Rohdaten und gibt die verbleibenden Messwerte an ein nachfolgendes Infinite Impulse Response Filter (IIR) weiter.
Die ODR sinkt dabei auf 100 Hz â€“ fÃ¼r viele
AnwendungsfÃ¤lle immer noch genug.
Die Wirkung der Filterung ist beeindruckend: Abb. 12 und 13 zeigen die gefilterten
Daten bei einer Dezimierung auf die HÃ¤lfte
(ODR: 200 Hz) resp. ein 20stel der Rohdaten (ODR: 100 Hz).

Decimation Filter 2 [Skala: 0,1s/0,001Â°/s])


Computing

Die berechneten Offset-Werte werden in
den Registern 0x36 bis 0x3A abgelegt und
bei allen folgenden Messungen automatisch
von den Rohwerten abgezogen.

Decimation Filter 20 [Skala: 0,1s/0,001Â°/s])

VergrÃ¶ÃŸert man die Skala des Oszilloskops
kann man erkennen, dass das Rauschen bei
ODR = 100 Hz auf etwa Â±0,0002Â°/s sinkt
(Abb. 14) â€“ sensationell.

maximaler Filterung [Skala: 0,1s/0,0001Â°/s]

Offset
Jeder Sensor, auch das Gyroskop, kann
einen konstanten Fehler (Offset) haben. Bei
meinem Sensor konnte ich allerdings keinen solchen Fehler messen (siehe oben).
Der Sensor bietet Ã¤hnliche integrierte Verfahren zur Kompensation von Fehlern wie
der Beschleunigungssensor, die ebenfalls
per Voreinstellung deaktiviert sind. FÃ¼r die
Fast Compensation kann man die Zahl der
Messungen, deren Mittelwert als Offset bestimmt wird, zwischen 32, 64, 128 und 256
wÃ¤hlen und die Offsetbestimmung fÃ¼r jede
der drei Achsen separat aktivieren. Um eine
mÃ¶glichst hohe Genauigkeit zu erzielen,
wird die Einstellung des Messbereichs Â±125
empfohlen.
Eingestellt, konfiguriert und aktiviert wird
die Fast Compensation in Register 0x32.
Das Ã¼bernimmt im Treiber die neue Funktion BMX055_GyroFastComp (Abb. 15).
Dabei sollte der Sensor in Ruhelage sein.

Bei der Slow Compensation misst der Sensor kontinuierlich, ob die Werte der selektierten Achsen des Gyroscops Ã¼ber einen
einstellbaren Zeitraum (40 bis 1280 ms) um
einen wÃ¤hlbaren Schwellenwert (0,1Â°/s bis
1Â°/s) von 0 abweichen. Tritt dieser Fall ein,
wird der Offset vom Rohwert abgezogen.
Die Rohdaten konvergieren anschlieÃŸend
gegen 0. Konfiguriert und aktiviert wird die
Slow Compensation Ã¼ber Register 0x31.
Das Ã¼bernimmt die neue Treiber-Funktion
BMX055_GyroSlowComp.
Auch beim Gyrosensor bleiben die Einstellungen und berechneten Offsets bis zum
Ausschalten des Sensors erhalten. Damit sie
nicht manuell zurÃ¼ckgesetzt werden mÃ¼ssen
(Offset-Reset in Register 0x21), habe ich
auch in der Funktion BMX055_GyroInit
einen Softreset (Register 0x14) ergÃ¤nzt.
Pufferung
Die Messungen des Gyrosensors kÃ¶nnen
ebenfalls in einem FIFO-Stack vorgehalten
werden. Hier passen sogar bis zu 100 Messungen in den Stack. Aber auch dieser Stack
lÃ¤uft in rund zwei Sekunden voll (Abb. 16).
Bei einer Messfrequenz von 100 Samples/s
fÃ¼hrt das zu einer VerzÃ¶gerung von einer
Sekunde zwischen Messung und Auslesen
des Werts.




Magnetometer
Rauschen

Anzahl Messwerte im Puffer [Skala: 0,1s/5])

Auch bei der Initialisierung des Gyro-Sensors wird im fischertechnik-Treiber der
FIFO-Stack im STREAM-Mode aktiviert â€“
was unweigerlich zu veralteten Messwerten
fÃ¼hrt. Das Problem lÃ¤sst sich wie beim
Beschleunigungssensor lÃ¶sen: Per Default
ist der FIFO-Mode BYPASS im Register
0x3E eingestellt, der einen FIFO mit Tiefe
1 verwendet; im korrigierten Treiber wird
dieser Modus beibehalten.
Mit der zusÃ¤tzlichen neuen Treiber-Funktion BMX055_GyrSetFIFOMode kann jeder andere FIFO-Mode aktiviert werden,
auch hier bei Bedarf fÃ¼r ausgewÃ¤hlte
Achsen (Abb. 17).

Wer sich die Magnetometer-Daten ansieht,
die der ROBO Pro-Treiber liefert, wird sich
Ã¼ber das starke Rauschen der Werte wundern. Eine Ursache dafÃ¼r ist, wie in Teil 1
des Beitrags gezeigt [3], dass der fischertechnik-Treiber wie bei den Werten des
Beschleunigungssensors keinen arithmetischen Rechts-Shift der X- und Y-Werte um
die drei niederstwertigen Bits und beim ZWert um das niederstwertige Bit vornimmt,
denn bei diesem Sensor sind nur die hÃ¶chstwertigen 13 bzw. 15 Bits der Rohdaten signifikant. Aber auch nach der Korrektur der
Werte enthalten die ungefilterten Daten ein
deutliches Rauschen, liegen aber zumindest
in dem in horizontaler Lage zu erwartenden
â€Rangeâ€œ von 0-40 ÂµT in X- und Y-Richtung
und ziemlich genau 50 ÂµT in Z-Richtung
(Abb. 18). Insbesondere die Rohdaten der
Z-Achse (blau) rauschen ganz erheblich.

[Skala: 0,5s/1ÂµT bzw. 10ÂµT (Z-Achse)]

1: FIFO, 2: STREAM) und der zu berÃ¼cksichtigenden Achsen (0: alle, 1: X, 2:Y, 3: Z)

Im ersten Teil des Beitrags habe ich gezeigt,
wie sich das Rauschen durch eine Bestimmung des arithmetischen Mittelwerts Ã¼ber
eine vorgegebene Anzahl von Messwerten
verringern lÃ¤sst [3]. Diese LÃ¶sung ist sehr
flexibel, da die Anzahl der fÃ¼r die
Mittelwertbestimmung
herangezogenen
Messwerte beliebig gewÃ¤hlt werden kann.
Wesentlich schneller ist es allerdings, diese
Aufgabe dem Sensor zu Ã¼bertragen. Denn
der BMX055 bringt eine Funktion mit, die
den Mittelwert aus einer in Register 0x51
(X-/Y-Achse) und 0x52 (Z-Achse) vorgegebenen Anzahl von Messungen ermittelt.


Prinzipiell kann jeder Wert aus {0, â€¦, 255}
konfiguriert werden; fÃ¼r die X- und YAchse ergibt sich die Zahl der Messungen
daraus durch Multiplikation mit zwei.
Dabei sinkt allerdings die ODR. Im Datenblatt werden vier â€typischeâ€œ Varianten empfohlen (Tab. 1) [2].

Tab. 1: Empfohlene Wiederholraten
fÃ¼r das Magnetometer

Der fischertechnik-Treiber verwendet in der
Initialisierungsfunktion die Regular-Einstellung. Das Ergebnis zeigt Abb. 19.

[Skala: 0,5s/1ÂµT bzw. 10ÂµT (Z-Achse)]

Computing

dem Regular Mode von 0,6 auf 0,3 ÂµT
halbieren. Das deckt sich mit meinen Messergebnissen.
WÃ¤hlt man die maximal mÃ¶gliche Anzahl
an Messungen fÃ¼r die Mittelwertbildung
(511 fÃ¼r X und Y, 256 fÃ¼r Z), so verschwindet das Rauschen in X- und Y-Richtung
vollstÃ¤ndig; in Z-Richtung bleibt ein â€Restrauschenâ€œ von Â±30 ÂµT. Die ODR sinkt auf
ca. 6 Hz (Abb. 21).

[Skala: 0,5s/1ÂµT bzw. 10ÂµT (Z-Achse)]

Ganz so weit muss man nicht einmal gehen:
Auch eine Mittelwertbildung Ã¼ber 129 Messungen in X-, Y- und Z-Richtung lÃ¤sst bei
einer ODR von 15 Hz das Rauschen praktisch verschwinden. Um den Filtermodus
wÃ¤hlbar zu machen, habe ich im Treiber die
Funktion BMX055_MagSetPrecMode ergÃ¤nzt, die auch einen â€Mode 0â€œ (keine
Filterung) und einen â€Mode 5â€œ (Ultra High
Precision) kennt (Abb. 22).

Noch einmal deutlich reduzieren lÃ¤sst sich
das Rauschen mit der High-Accuracy-Filterung (Abb. 20).
BMX055_MagSetPrecMode

Offset

[Skala: 0,5s/1ÂµT bzw. 10ÂµT (Z-Achse)]

Nach Datenblatt lÃ¤sst sich der Rauschanteil
(Root Mean Square, RMS) damit gegenÃ¼ber

Die Kalibrierung des Magnetometers zum
Ausgleich eines Hard-Iron-Fehlers habe ich
im ersten Teil des Beitrags beschrieben [3].
Die Variablen CalX und CalY mÃ¼ssen fÃ¼r
die jeweilige Anwendungsumgebung gemessen und gesetzt werden.




Temperaturkompensation
FÃ¼r die Kompensation der von der Temperatur des Sensors verursachten StÃ¶rungen
sind im fischertechnik-ROBO Pro-Treiber
zwei Funktionen fÃ¼r die X- und die YAchse vorgesehen.


Damit auch die Werte der Z-Achse genutzt
werden kÃ¶nnen, die z. B. fÃ¼r die Berechnung der Neigungskompensation der Kompasswerte benÃ¶tigt werden (siehe unten),
habe ich die Initialisierungsfunktion um das
Auslesen der erforderlichen Konstanten des
Sensors erweitert und auf der Grundlage der
Originaltreiber fÃ¼r den BMM050 von
Bosch eine entsprechende Funktion fÃ¼r die
Z-Achse ergÃ¤nzt (BMX055_MagCompZ)
[4].
Heading
Die im ersten Teil des Beitrags vorgestellte
Berechnung der Abweichung von der NordAusrichtung (Winkel ğœ“, â€Headingâ€œ) kÃ¶nnen wir nun mit dem korrigierten und verbesserten Treiber vornehmen [3].
mit dem fischertechnik-Treiber. Die
Schwankungen sind mit bis zu Â±20Â° erheblich â€“ vor allem aber ist der Wert selbst
fehlerhaft.



Im High Precision Mode sieht das schon
ganz anders aus. Zwar â€springtâ€œ das Ergebnis auch hier noch um rd. Â±4Â°, aber in Abb.
25 ist zu erkennen, dass wir das mit einem
Filter leicht korrigieren kÃ¶nnen.

Treiber [Skala: 1s/50ÂµT bzw. 1s/5Â° (Heading)]

Eine MÃ¶glichkeit zur Filterung der AusschlÃ¤ge ist die Bestimmung des arithmetischen Mittels aus mehreren Messwerten
(wie in Teil 1 des Beitrags beschrieben [3]).
Das wirkt wie ein Tiefpass-Filter: Kurze
AusschlÃ¤ge werden herausgemittelt, bestÃ¤ndige Ã„nderungen hingegen (verzÃ¶gert)
durchgelassen.
Effizienter als die Speicherung der ğ‘› letzten
Messwerte und eine jeweils neue Mittelwertberechung ist es, den neuen HeadingWert anteilig aus dem zuvor bestimmten
und dem gerade berechneten Winkel ğœ“
abzuleiten:
ğ»ğ‘’ğ‘ğ‘‘ğ‘›ğ‘’ğ‘¢ = ğ‘ Â· ğ»ğ‘’ğ‘ğ‘‘ğ‘ğ‘™ğ‘¡ + (1 âˆ’ ğ‘) Â· ğœ“
mit ğ‘ âˆˆ [0,1].
Diese Mittelwertbestimmung (oder Filterung) wird auch als Exponentional Moving
Average oder Infinite Impulse Response
(IIR-Filter) bezeichnet, weil sich abrupte
Ã„nderungen des Winkels erst mit
â€unendlicherâ€œ VerzÃ¶gerung vollstÃ¤ndig auf
den Heading-Wert auswirken.
Die Reduktion des Rauschens â€erkaufenâ€œ
wir uns dabei also mit einer verlangsamten
Wirkung einer WinkelÃ¤nderung Ã¼ber eine
grÃ¶ÃŸere Zahl von Messungen â€“ je nach
gewÃ¤hlter ODR und der StÃ¤rke der WinkelÃ¤nderung kann die VerzÃ¶gerung einige
Sekunden betragen.

Das Ergebnis der IIR-Filterung zeigt Abb.
26 fÃ¼r ğ‘ = 0,98: Das Rauschen sinkt auf
unter Â±0,5Â°.

Treiber und Mittelwertbildung
[Skala: 1s/50ÂµT bzw. 1s/5Â° (Heading)]

Fazit
Im Kombisensor von fischertechnik steckt
ein Ã¤uÃŸerst prÃ¤ziser IMU-Hochleistungssensor von Bosch, der Ã¼ber zahlreiche
Funktionen verfÃ¼gt.
Der von fischertechnik ausgelieferte Treiber fÃ¼r ROBO Pro enthÃ¤lt jedoch einige die
QualitÃ¤t der Messdaten deutlich beeintrÃ¤chtigende Einstellungen und nutzt einige
wichtige Sensorfunktionen unvollstÃ¤ndig
oder gar nicht: Die vom Treiber gelieferten
Daten rauschen stark, sind ungenau und
veraltet.
Daher habe ich die entsprechenden Fehler
korrigiert, alle fÃ¼r anspruchsvolle Anwendungen nach meiner EinschÃ¤tzung wichtigsten Funktionen im Treiber ergÃ¤nzt und

Computing

einige wenig sinnvolle Konfigurationen angepasst.
Die korrigierte und erweiterte Version 2.0
des Treibers (Kombisensor-BMX055) sowie
einige Testprogramme, die ich im Beitrag
verwendet habe, findet ihr im Downloadbereich der ft:pedia.
Der Sensor kennt auÃŸerdem noch Selbsttest-Funktionen und solche, die helfen, den
vom Sensor verbrauchten Strom zu minimieren. Sie sind wichtig fÃ¼r Smartphones,
in denen der Sensor stÃ¤ndig im Hintergrund
arbeitet, aber fÃ¼r die in fischertechnik-Modellen vorstellbaren Einsatzzwecke sicherlich weniger relevant, daher habe ich sie im
Treiber nicht ergÃ¤nzt.

Quellen
[1]

fischertechnik: Kombisensor Art.-Nr.
158402 3-in-1 Orientierungssensor.
Kurzanleitung, 09.06.2017.

[2]

Bosch: BMX055. Small, versatile 9axis sensor module. Data Sheet.
Revision 1.1, 07.11.2014.

[3]

Dirk Fox: Experimente mit dem
Kombisensor. ft:pedia 3/2021, S. 78â€“
91.

[4]

Bosch Sensortec: bmm050.c, v2.0.3,
12.12.2014, github.com


